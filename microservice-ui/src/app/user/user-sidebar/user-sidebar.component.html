<nav class="user-sidebar no-underline" [class.collapsed]="sidebarCollapsed" [class.hidden]="sidebarHidden">
  <ul>
    <li *ngFor="let route of routes; let i = index">
      <a *ngIf="route.route"
         [routerLink]="route.route"
         class="menu-parent"
         [class.icon-only]="sidebarCollapsed"
         routerLinkActive="active"
         (mouseenter)="hoveredIndex = i"
         (mouseleave)="hoveredIndex = null"
         [attr.title]="sidebarCollapsed ? route.title : null">
        <span class="menu-content">
          <!-- Always show icon if present, add a helper class for CSS targeting -->
          <span *ngIf="route.icon" class="material-icons sidebar-icon">{{route.icon}}</span>
          <!-- Only show title if not collapsed or hovered -->
          <span class="menu-title" *ngIf="!sidebarCollapsed || hoveredIndex === i">
            {{ route.title }}
          </span>
        </span>
        <!-- Tooltip for collapsed sidebar on hover -->
        <span
          class="sidebar-tooltip"
          *ngIf="sidebarCollapsed && hoveredIndex === i">
          {{ route.title }}
        </span>
      </a>
      <div *ngIf="!route.route"
           class="menu-parent"
           [class.icon-only]="sidebarCollapsed"
           (mouseenter)="hoveredIndex = i"
           (mouseleave)="hoveredIndex = null"
           [attr.title]="sidebarCollapsed ? route.title : null">
        <span class="menu-content">
          <!-- Always show icon if present, add a helper class for CSS targeting -->
          <span *ngIf="route.icon" class="material-icons sidebar-icon">{{route.icon}}</span>
          <!-- Only show title if not collapsed or hovered -->
          <span class="menu-title" *ngIf="!sidebarCollapsed || hoveredIndex === i">
            {{ route.title }}
          </span>
        </span>
        <!-- Tooltip for collapsed sidebar on hover -->
        <span
          class="sidebar-tooltip"
          *ngIf="sidebarCollapsed && hoveredIndex === i">
          {{ route.title }}
        </span>
      </div>
      <!-- If you have submenus, add them here -->
      <!-- Example:
      <ul class="submenu" *ngIf="route.children && route.expanded && !sidebarCollapsed">
        <li *ngFor="let child of route.children">
          <a [routerLink]="child.route" routerLinkActive="active">{{child.title}}</a>
        </li>
      </ul>
      -->
    </li>
  </ul>
</nav>